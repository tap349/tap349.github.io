---
layout: post
title: Prettier
date: 2019-07-19 19:24:40 +0300
access: public
comments: true
categories: [prettier, js]
---

<!-- @format -->

<!-- more -->

<!-- prettier-ignore -->
* TOC
{:toc}
<hr>

## tips

### run Prettier on all JS files

1. <https://github.com/prettier/prettier-vscode/issues/321#issuecomment-356171110>

```sh
$ yarn run prettier --write "**/*.js"
```

## troubleshooting

### MacVim generates `*:p` artifacts in project root directory

```
$ ls -al
...
-rw-r--r--    1 tap  staff    7598 Jul 19 15:14 11:p
-rw-r--r--    1 tap  staff    9643 Jul 19 15:14 9:p
```

they are generated sporadically - I haven't found any pattern.

**solution**

most likely these are backup files generated by Vim and they have something to
do with Prettier (because they appeared right after I started to use Prettier)
but their file names are not expanded for some reason:

```vim
" ~/.vim/autocommands.vim

function! s:SetBackupDir()
  let l:backupdir = $HOME . '/.vim/backup/' . expand('%:p:h')
  " ...
endfunction
```

it may happen because 2 backup files are written to disk almost simultaneously:

- first backup of original file is written
- then original file is formatted with Prettier and its backup is written too

my guess is Vim cannot handle this situation properly - hence the artifacts.

current (temporary) solution is to disable backups completely:

```diff
  " ~/.vim/vimrc

- set backup
+ set nobackup
```

**_UPDATE (2019-07-25)_**

artifacts are still generated even though Vim backups are disabled.
