---
layout: post
title: Systemd
date: 2017-05-02 02:41:19 +0300
access: public
categories: [systemd]
---

<!-- more -->

## useful commands

### systemctl

reload all unit files
(do it every time after adding or modifying unit files):

```sh
$ sudo systemctl daemon-reload
```

start unit:

```sh
$ sudo systemctl start player.socket
```

enable unit (start automatically on boot):

```sh
$ sudo systemctl enable player.socket
```

show unit status (+ unit details and recent log entries):

```sh
$ sudo systemctl status player.socket
```

list active units by type:

```sh
$ sudo systemctl list-units --type socket
```

list all units and show their state (enabled/disabled):

```sh
$ sudo systemctl list-unit-files --type socket
```

poweroff or reboot system:

```sh
$ sudo systemctl poweroff
$ sudo systemctl reboot
```

### journalctl

useful options:

- `-e, --pager-end` - jump to the end of the journal
- `-f, --follow` - follow journal (just like `tail -f`)

view recent entries with explanation messages:

```sh
$ sudo journalctl -xn
```

view journal for specified unit:

```sh
$ sudo journalctl -u my-player.service --since today
```

view journal for multiple units at once
(log entries are merged in chronological order):

```sh
$ sudo journalctl -u my-player.service -u my-player.socket --since today
```

view journal for multiple units using wildcard:

```sh
$ sudo journalctl -u my-*.service --since today
```

## tips

### timer unit

- foo.service
- foo.timer

if using timer for associated service enable timer unit only -
associated service unit will be activated when the timer is reached:

```sh
$ sudo systemctl enable player.timer
```

### socket unit

- foo.socket
- foo.timer

if using socket-based activation of the service enable socket unit only -
associated service unit will be activated when the timer is reached:

```sh
$ sudo systemctl enable player.timer
```
