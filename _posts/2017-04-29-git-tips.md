---
layout: post
title: Git - Tips
date: 2017-04-29 02:20:32 +0300
access: public
categories: [git]
---
<!-- more -->

## [how to] undo `git reset HEAD~`

<http://stackoverflow.com/questions/2510276/undoing-git-reset>

```sh
$ git reset 'HEAD@{1}'
```

or

```sh
$ git reset ORIG_HEAD
```

## [how to] fork a fork and sync it with original repo

- <https://help.github.com/articles/syncing-a-fork/>

<https://github.com/r-icarus/detergentex.git>
<br>-> <https://github.com/danxexe/detergentex> (fork with changes I need)
<br>-> <https://githbu.com/tap349/detergentex> (my fork)

what I want to get in the end is to use a fork synced with original repo.

```sh
$ git clone git@github.com:tap349/detergentex.git
$ git checkout feature/httpc-options-fork
$ git remote -v
$ git remote add upstream https://github.com/r-icarus/detergentex.git
$ git checkout master
$ git fetch upstream
$ git merge upstream/master
$ git checkout feature/httpc-options-fork
$ git rebase master
$ git mergetool
/ resolve conflicts
$ git rebase --continue
$ git clean -f
$ git push -f
```

## [how to] sign GitHub commits

1. <https://help.github.com/articles/generating-a-new-gpg-key/>
2. <https://help.github.com/articles/associating-an-email-with-your-gpg-key/>
3. <https://help.github.com/articles/signing-commits-using-gpg/>

additional required configuration:

- add `-S` flag to `git commit` command in all aliases in _~/.zshenv_
- configure Git commit email:

  ```sh
  $ git config --global user.email <GitHub verified email>
  ```

  if Git email doesn't match GitHub email,
  commit will have `Unverified` badge on GitHub.

- configure Git signing key:

  1. <https://stackoverflow.com/questions/41052538/git-error-gpg-failed-to-sign-data>

  ```sh
  $ gpg --list-secret-keys --keyid-format LONG
  $ git config --global user.signingkey <GPG public key>
  ```

  without setting signing key explicitly Git will fail to sign commit:

  ```
  $ git commit -S -m "foo"
  error: gpg failed to sign the data
  fatal: failed to write commit object
  ```
