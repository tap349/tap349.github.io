---
layout: post
title: AWS
date: 2017-04-06 18:01:36 +0300
access: private
categories: [AWS]
---

configure AWS services.

<!-- more -->

think of some name that you would use throughout all the services that
identifies your project - say, foo =>

- bucket: foo.bucket
- policy: foo.policy
- user: foo.user

### account

create amazon account if you don't have one
(this is a single account for all amazon services including shop itself).

### [S3](https://console.aws.amazon.com/s3/home?region=us-west-2)

#### create bucket

1) Name and region

- Bucket name: foo.bucket (must be unique across all buckets names in S3)
- Region: EU (Frankfurt)

2) Set properties

leave default values (Versioning and Logging are disabled).

3) Set permissions

give `Read` permissions to `Everyone` (for `Objects` only).

### [IAM](https://console.aws.amazon.com/iam/home?region=us-west-2)

#### create policy

`Policies` (left sidebar) -> `Create policy` (button)

1) Step 1: Create Policy

select `Create Your Own Policy`

2) Step 2: Set permissions

omitted when creating your own policy.

3) Step 3: Review Policy

- Policy Name: foo.policy
- Policy Document: policy itself (replace bucket name placeholder with foo.bucket)

#### create user

`Users` (left sidebar) -> `Add user` (button)

1) Details

- User name: foo.user
- Access type: [x] Programmatic access

2) Permissions

- select `Attach existing policies directly`
- find and check foo.policy

3) Review

4) Complete

save credentials (`Access key ID` and `Secret access key`) -
secret access key won't be available later.

### awscli

- install awscli

  ```sh
  $ brew install awscli
  ```

- configure aws

  select the same [region](http://docs.aws.amazon.com/general/latest/gr/rande.html)
  as for S3 bucket.

  ```sh
  $ aws configure
  AWS Access Key ID: ***
  AWS Secret Access Key: ***
  Default region name: eu-central-1
  Default output format: None
  ```

- test copying to S3 bucket

  ```sh
  $ aws s3 cp test.txt s3://foo.bucket/
  upload: ./test.txt to s3://foo.bucket/test.txt
  $ aws s3 ls s3://foo.bucket/
  2017-04-07 03:14:59          4 test.txt
  $ aws s3 rm s3://ntv-test.bucket/test.txt
  delete: s3://ntv-test.bucket/test.txt
  ```
