---
layout: post
title: Webpack
date: 2018-05-08 00:48:57 +0300
access: private
comments: true
categories: [rails, phoenix, webpack]
---

<!-- more -->

* TOC
{:toc}
<hr>

1. <https://webpack.js.org/concepts/>
2. <https://webpack.js.org/configuration/>

Rails
-----

1. <https://github.com/rails/webpacker>
2. <https://github.com/rails/webpacker/blob/master/docs/webpack.md>

### configuration

1. <https://github.com/rails/webpacker/blob/master/docs/webpack.md>

pack (Webpacker term) == entry (Webpack term)

<https://github.com/rails/webpacker>:

NODE_ENV values:

- production
- development

assets are compiled in NODE_ENV mode but use/load RAILS_ENV configuration
(production environment is used as a fallback one) from _config/webpacker.yml_.

> binstubs compile in development mode, rake tasks compile in production mode:

```ruby
# compiles in development mode unless NODE_ENV is specified
./bin/webpack
./bin/webpack-dev-server

# compiles in production mode by default unless NODE_ENV is specified
bundle exec rails assets:precompile
bundle exec rails webpacker:compile
```

### assets

1. <https://github.com/rails/webpacker/blob/master/docs/assets.md>

<https://github.com/rails/webpacker/issues/581#issuecomment-316937091>:

> packs is a special directory meant only for entry files i.e. written either
> in JS, Coffee or TS (as long as it compiles to JS). Every other thing should
> be outside packs and may live under app/javascript or anywhere you wish to
> be as long as you can reference it. If you reference styles in your pack all
> styles will be extracted to [pack_name].css, which you can reference in your
> views:

```javascript
// packs/app.js
import '../styles/main.sass'
import '../../assets/stylesheets/main.sass'
```

=> only JS files are allowed to be packs (entries), CSS files imported inside
packs will be extracted into `<pack_name>.css` (which can referenced in layout
with `stylesheet_pack_tag` helper).

Phoenix
-------

1. <https://www.dailydrip.com/blog/how-to-use-phoenix-with-webpack-react-redux.html>
2. <https://medium.com/@waffleau/using-webpack-4-with-phoenix-1-3-8245b45179c0>
